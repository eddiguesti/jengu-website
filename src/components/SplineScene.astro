---
/**
 * Spline Scene Component
 * Non-blocking Spline runtime implementation for faster page load
 */
---

<canvas id="spline-canvas" class="spline-canvas"></canvas>

<script>
  const canvas = document.getElementById('spline-canvas');

  async function loadSpline() {
    try {
      // Dynamically import the runtime to avoid blocking initial render
      const { Application } = await import('@splinetool/runtime');

      const app = new Application(canvas);

      // Load the scene
      await app.load('https://prod.spline.design/H0BsfAOW2BCmCUyJ/scene.splinecode');

      // Scene loaded - add loaded class for fade in
      const container = document.querySelector('.spline-container');
      if (container) {
        container.classList.add('loaded');
      }
    } catch (error) {
      console.error('Error loading Spline scene:', error);
    }
  }

  // Load during browser idle time to not block initial render
  if ('requestIdleCallback' in window) {
    requestIdleCallback(() => {
      loadSpline();
    });
  } else {
    setTimeout(() => {
      loadSpline();
    }, 1);
  }
</script>

<style>
  .spline-canvas {
    width: 100%;
    height: 100%;
    display: block;
  }
</style>
