---
interface Props {
  currentPath: string;
}

const { currentPath } = Astro.props;
const siteUrl = 'https://jengu.ai';

// Pages that have French and Spanish translations
// Only these paths will get hreflang links
const multilingualPaths = new Set([
  '/',
  '/about',
  '/blog',
  '/book',
  '/calculator',
  '/case-studies',
  '/contact',
  '/dynamic-pricing',
  '/faq',
  '/privacy',
  '/services',
  '/team',
  '/terms'
]);

// Extract the path without locale prefix
let basePath = currentPath;
if (currentPath.startsWith('/fr/')) {
  basePath = currentPath.substring(3);
} else if (currentPath.startsWith('/es/')) {
  basePath = currentPath.substring(3);
}

// Ensure basePath starts with /
if (!basePath.startsWith('/')) {
  basePath = '/' + basePath;
}

// Remove trailing slash if present (except for root)
if (basePath !== '/' && basePath.endsWith('/')) {
  basePath = basePath.slice(0, -1);
}

// Check if this path has multilingual support
const hasTranslations = multilingualPaths.has(basePath);

const enUrl = `${siteUrl}${basePath}`;
const frUrl = `${siteUrl}/fr${basePath}`;
const esUrl = `${siteUrl}/es${basePath}`;
---

{/* Only render hreflang links if translations exist for this path */}
{hasTranslations ? (
  <>
    <link rel="alternate" hreflang="en" href={enUrl} />
    <link rel="alternate" hreflang="fr" href={frUrl} />
    <link rel="alternate" hreflang="es" href={esUrl} />
    <link rel="alternate" hreflang="x-default" href={enUrl} />
  </>
) : (
  <link rel="canonical" href={enUrl} />
)}
